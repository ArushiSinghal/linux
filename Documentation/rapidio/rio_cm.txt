RapidIO subsystem Channelized Messaging character device driver (rio_cm.c)
==========================================================================

Version History:
----------------
  1.0.0 - Initial driver release.

==========================================================================

I. Overview

This device driver is the result of collaboration within the RapidIO.org
Software Task Group (STG) between Texas Instruments, Freescale,
Prodrive Technologies, Nokia Networks, BAE and IDT.  Additional input was
received from other members of RapidIO.org. The objective was to create a
character mode driver interface which exposes messaging capabilities of RapidIO
endpoint devices (mports) directly to applications, in a manner that allows
the numerous and varied RapidIO implementations to interoperate.

This driver (RIO_CM) provides to user-space applications shared access to
RapidIO mailbox messaging resources.

RapidIO specification (Part 2) defines that endpoint devices may have up to four
messaging mailboxes in case of multi-packet message (up to 4KB) and
up to 64 mailboxes if single-packet messages (up to 256 B) are used. In addition
to protocol definition limitations, a particular hardware implementation can
have reduced number of messaging mailboxes.  RapidIO aware applications must
therefore share the messaging resources of a RapidIO endpoint.

Main purpose of this device driver is to provide RapidIO mailbox messaging
capability to large number of user-space processes by introducing socket-like
operations using a single messaging mailbox.  This allows applications to
use the limited RapidIO hardware resources efficiently and effectively.

Most of device driver's operations are supported through 'ioctl' system calls.

When loaded this device driver creates a single filesystem node named rio_cm
in /dev directory common for all registered RapidIO mport devices.

Using available set of ioctl commands user-space applications can perform
following operations:

- Obtain list of local mport devices that support messaging operations
    (RIO_CM_MPORT_GET_LIST).
- Obtain list of messaging capable remote endpoints (peers) in a RapidIO network
    (RIO_CM_EP_GET_LIST_SIZE/RIO_CM_EP_GET_LIST).
- Create RapidIO messaging channel (RIO_MPORT_MAINT_HDID_SET).
- Bind created channel to the specified mport device (RIO_CM_CHAN_BIND).
- Listen on the specified channel (RIO_CM_CHAN_LISTEN)
- Accept a connection request on the specified channel (RIO_CM_CHAN_ACCEPT)
- Send a connection request to a remote node/channel (RIO_CM_CHAN_CONNECT).
- Send a data message to a connected channel (RIO_CM_CHAN_SEND).
- Receive a data message on a connected channel (RIO_CM_CHAN_RECEIVE).
- Close an active channel (RIO_CM_CHAN_CLOSE).

II. Hardware Compatibility

This device driver uses standard interfaces defined by kernel RapidIO subsystem
and therefore it can be used with any mport device driver registered by RapidIO
subsystem with limitations set by available mport HW implementation of messaging
mailboxes.

III. Module parameters

- 'dbg_level' - This parameter allows to control amount of debug information
        generated by this device driver. This parameter is formed by set of
        bit masks that correspond to the specific functional block.
        For mask definitions see 'drivers/rapidio/devices/rio_cm.c'
        This parameter can be changed dynamically.
        Use CONFIG_RAPIDIO_DEBUG=y to enable debug output at the top level.

- 'cmbox' - Number of RapidIO mailbox to use (default value is 1).
        This parameter allows to set messaging mailbox number that will be used
        within entire RapidIO network. It can be used when default mailbox is
        used by other device drivers or is not supported by some nodes in the
        RapidIO network.

- 'chstart' - Start channel number for dynamic assignment. Default value - 256.
        Allows to exclude channel numbers below this parameter from dynamic
		allocation to avoid conflicts with software components that use
		reserved predefined channel numbers.

IV. Known problems

  None.

V. User-space Applications and API

API library and applications that use this device driver are available from
RapidIO.org.

VI. TODO List

- Add support for system notification messages (reserved channel 0).
