Broadcom AVS CPUfreq driver
===========================

This driver provides voltage and frequency scaling on Broadcom SoCs using
the AVS firmware with DVFS support. The AVS firmware is running on its own
co-processor. The driver supports both uniprocessor (UP) and symmetric
multiprocessor (SMP) systems which share clock and voltage across all CPUs.

Actual voltage and frequency scaling is done solely by the AVS firmware.
This driver does not change frequency or voltage itself. It provides a
standard CPUfreq interface to the rest of the kernel and to userland. It
interfaces with the AVS firmware to effect the requested changes and to
report back the current system status in a way that is expected by existing
tools.

This driver requires two DT nodes. One node (brcm,avs-cpu-data-mem)
references the mailbox register used to communicate with the AVS CPU. The
second node (brcm,avs-cpu-l2-intr) is required to trigger an interrupt on
the AVS CPU. The interrupt tells the AVS CPU that it needs to process a
command sent to it by this driver. Interrupting the AVS CPU is mandatory for
commands to be processed.

It also requires a reference to the AVS host interrrupt controller, so the
driver can react to interrupts generated by the AVS CPU whenever a command
has been processed. See [1] for more information on the brcm,l2-intc.

[1] Documentation/devicetree/bindings/interrupt-controller/brcm,l2-intc.txt


Node brcm,avs-cpu-data-mem
--------------------------

Required properties:
- compatible: Sould be one of: brcm,avs-cpu-data-mem,
              brcm,bcm7271-avs-cpu-data-mem or brcm,bcm7268-avs-cpu-data-mem
- reg: Specifies base physical address and size of the registers.
- interrupts: The interrupt that the AVS CPU will use to interrupt the host
              when a command completed.
- interrupt-parent: The interrupt controller the above interrupt is routed
                    through.
- interrupt-names: The name of the interrupt used to interrupt the host.

Optional properties:
- None

Node brcm,avs-cpu-l2-intr
-------------------------

Required properties:
- compatible: Sould be one of: brcm,avs-cpu-l2-intr,
              brcm,bcm7271-avs-cpu-l2-intr or brcm,bcm7268-avs-cpu-l2-intr
- reg: Specifies base physical address and size of the registers.

Optional properties:
- None


Example
=======

	avs_host_l2_intc: interrupt-controller@f04d1200 {                
		#interrupt-cells = <1>;                                  
		compatible = "brcm,l2-intc";                             
		interrupt-parent = <&intc>;                              
		reg = <0xf04d1200 0x48>;                                 
		interrupt-controller;                                    
		interrupts = <0x0 0x19 0x0>;                             
		interrupt-names = "avs";                                 
	};                                                               

	avs-cpu-data-mem@f04c4000 {
		compatible = "brcm,bcm7271-avs-cpu-data-mem",
				"brcm,avs-cpu-data-mem";
		reg = <0xf04c4000 0x60>;
		interrupts = <0x1a>;
		interrupt-parent = <&avs_host_l2_intc>;
		interrupt-names = "sw_intr";
	};

	avs-cpu-l2-intr@f04d1100 {
		compatible = "brcm,bcm7271-avs-cpu-l2-intr",
				"brcm,avs-cpu-l2-intr";
		reg = <0xf04d1100 0x10>;
	};
